<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blockly â€” Student Sign Up</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body { background: #f4f6f8; font-family: "Inter", system-ui, Roboto, Arial; }
    .card-auth { max-width: 560px; margin: 40px auto; border-radius: 12px;
      box-shadow: 0 6px 18px rgba(20,30,50,0.08); }
  </style>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-firestore.js"></script>
</head>

<body>

<div class="card card-auth p-4">
  <div class="card-body">
    <h3 class="card-title text-center mb-2">Create a Student account</h3>
    <p class="text-center text-muted mb-4">Sign up to access courses and Blockly projects</p>

    <div class="row g-3">

      <!-- Name -->
      <div class="col-12">
        <label class="form-label">Full name</label>
        <input id="teachName" class="form-control form-control-lg" placeholder="Your full name">
        <div id="nameError" class="text-danger small mt-1"></div>
      </div>

      <!-- Email -->
      <div class="col-12">
        <label class="form-label">Email</label>
        <input id="teachEmail" type="email" class="form-control form-control-lg" placeholder="you@example.com">
        <div id="emailError" class="text-danger small mt-1"></div>
      </div>

      <!-- Password -->
      <div class="col-6">
        <label class="form-label">Password</label>
        <input id="teachPassword" type="password" class="form-control form-control-lg" placeholder="Create password">
        <div id="passwordError" class="text-danger small mt-1"></div>
      </div>

      <!-- Confirm -->
      <div class="col-6">
        <label class="form-label">Confirm</label>
        <input id="teachPasswordConfirm" type="password" class="form-control form-control-lg" placeholder="Confirm password">
        <div id="confirmError" class="text-danger small mt-1"></div>
      </div>

      <!-- Submit -->
      <div class="col-12 d-grid">
        <button id="btnTeachSignup" class="btn btn-primary btn-lg">Create Student account</button>
      </div>

      <div class="col-12 text-center text-muted">or</div>

      <!-- Google Signup -->
      <div class="col-12 d-grid">
        <button id="googleSignInTeachBtn" class="btn google-btn btn-lg">
          Sign up with Google
        </button>
      </div>

      <div class="col-12 text-center small text-muted">
        Already have an account? <a href="login.html">Sign in</a>
      </div>

    </div>
  </div>
</div>

<script src="firebase-auth.js"></script>

<script>
document.getElementById("btnTeachSignup").addEventListener("click", function () {

  const name = document.getElementById("teachName").value.trim();
  const email = document.getElementById("teachEmail").value.trim();
  const pw = document.getElementById("teachPassword").value;
  const pwc = document.getElementById("teachPasswordConfirm").value;

  // Clear errors
  document.getElementById("nameError").innerHTML = "";
  document.getElementById("emailError").innerHTML = "";
  document.getElementById("passwordError").innerHTML = "";
  document.getElementById("confirmError").innerHTML = "";

  let valid = true;

  if (!name) {
    document.getElementById("nameError").innerHTML = "Please enter your full name.";
    valid = false;
  }

  if (!email) {
    document.getElementById("emailError").innerHTML = "Please enter an email.";
    valid = false;
  }

  // Validate password rules (NO visual rule box displayed)
  const rulesPassed =
    pw.length >= 8 &&
    /[A-Z]/.test(pw) &&
    /[a-z]/.test(pw) &&
    /[0-9]/.test(pw) &&
    /[!@#$%^&*(),.?\":{}|<>]/.test(pw);

  if (!rulesPassed) {
    document.getElementById("passwordError").innerHTML =
      "Password must contain uppercase, lowercase, number, special character, and be at least 8 characters.";
    valid = false;
  }

  if (pw !== pwc) {
    document.getElementById("confirmError").innerHTML = "Passwords do not match.";
    valid = false;
  }

  if (!valid) return;

  window.FirebaseAuthApp.emailPasswordSignup(name, email, pw, "Student");

});

// GOOGLE SIGNUP
document.getElementById("googleSignInTeachBtn").addEventListener("click", function () {
  window.FirebaseAuthApp.signInWithGoogle("Student");
});
</script>

</body>
</html>
